{
  "$request": {
    "get_results": {
      "method": "get",
      "url": "/api/specimens",
      "@params": "$self.state.model",
      "@beforeRequest": "$global.normalizeRequest",
      "@onError": "$global.operationFailed",
      "@onSuccess": "$self.setView('RESULT')"
    }
  },
  "$compile": {
    "type": "section",

    "content": [
      {
        "type": "button-group",
        "className": "btn-group pull-right",
        "content": [
          {
            "type": "button",
            "name": "GET_RESULTS",
            "className": "btn btn-success",
            "icon": "fa fa-check-circle-o",
            "title": "Execute",
            "@onClick": "$request.get_results"
          },
          {
            "type": "button",
            "!if": "state.results",
            "type": "button",
            "className": "btn btn-warning",
            "name": "state.model.fields",
            "title": "Export",
            "icon": "fa fa-download",
            "@onClick": "$self.exportResultsAsCSV"
          }
        ]
      },
      {
        "type": "tab-list",
        "@currentTab": "$self.state.view",
        "defaultTab": "QUERY_FORM",
        "@onClick": "$self.setView",
        "tabs": [
          {
            "label": "Query",
            "tabKey": "QUERY_FORM",
            "content": {
              "type": "form",
              "className": "form-horizontal",
              "content": [
                {
                  "$ref": "./selectors.json"
                },
                {
                  "$ref": "../../data-entry/views/shared/document-selectors.json"
                },
                {
                  "$ref": "./modifiers.json"
                }
              ]
            }
          },
          {
            "label": "Results",
            "tabKey": "RESULTS",
            "content": {
              "type": "rich-table",
              "@data": "state.results",
              "@columns": "state.model.fields"
            }
          }
        ]
      }
    ]
  }
}
