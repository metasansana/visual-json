<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: core/Scope.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: core/Scope.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import DotAccess from 'dot-access';

/**
 * Scope retains all the variable information during parsing.
 *
 * Directives interact with this class to store and retrieve information.
 * @param {Object} globalCtx
 * @param {Object} localCtx
 * @param {SymbolParser} symbolParser
 */
class Scope {

    constructor(envCtx, localCtx, symbolParser) {
        this.envCtx = envCtx;
        this.localCtx = localCtx;
        this.symbolParser = symbolParser;
    }

    replaceSelf(self) {

        var newLocalCtx;

        for(var key in this.localCtx)
        if(this.localCtx.hasOwnProperty(key))
        newLocalCtx[key] = key;
    }

    /**
     * set puts a value into localCtx.
     *
     * This value will be available to the current parsing stack only.
     * @param dest The directive to store this value (eg : $request, $resource)
     * @param key The key name of this value
     * @param value The value
     * @returns {Scope}
     */
    set(dest, key, value){
        this.localCtx[dest] = this.localCtx[dest] || {};
        this.localCtx[dest][key] = value;
        return this;
    }

    /**
     * resolve turns a path string into a value stored in either localCtx or globalCtx
     * @param path
     * @returns {*|null}
     */
    resolve(path) {

        var value;

        value = DotAccess.get(this.localCtx, path);
        if(value) return value;

        value = DotAccess.get(this.envCtx, path);
        if(value) return value;

        return null;

    }

    applySymbols(tree) {
        return this.symbolParser.parse(tree, this);
    }

}

export default Scope</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="CompileDirective.html">CompileDirective</a></li><li><a href="Environment.html">Environment</a></li><li><a href="ES2015Error.html">ES2015Error</a></li><li><a href="ParseDirective.html">ParseDirective</a></li><li><a href="RequestDirective.html">RequestDirective</a></li><li><a href="ResourceDirective.html">ResourceDirective</a></li><li><a href="Scope.html">Scope</a></li><li><a href="SetDirective.html">SetDirective</a></li><li><a href="SymbolParser.html">SymbolParser</a></li><li><a href="UnknownDirectiveError.html">UnknownDirectiveError</a></li><li><a href="UnknownTypeError.html">UnknownTypeError</a></li><li><a href="Utils.html">Utils</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0-dev</a> on Sun Jul 12 2015 16:49:19 GMT-0400 (AST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
